@{
    Layout = "_LayoutAutenticado";
    ViewData["Title"] = "Confecionar";
    ViewData["HideHeader"] = true;
}

<div class="container">
    <div class="row">
        <div class="col-sm-8">
            <img src="~/logo.png"
                 alt="Model.Receita.Nome"
                 style="max-width: 100%; object-fit: cover;" />
            <i class="fas fa-star" style="color:gold;position:absolute; left:1em; top:0.5em; font-size:2em"></i>
        </div>
        <div class="col-sm-4" style="text-align:center;border-left: 3px solid #4CAF50;">
            <h4>Model.Receita.Nome</h4>
            <span><i class="fas fa-signal" style="color: green; margin-right: 0.5em;"></i>Fácil</span>
            <span style="margin-left:1em;"><i class="fas fa-clock" style="margin-right: 0.5em;"></i>10 min</span>
            <span style="margin-left:1em;">2 doses</span>
            <div style="text-align:left;margin-top:1em;">
                Etiquetas:
                <ul class="CustomBullet" style="text-align:left;list-style: none">
                    <li>
                        etiqueta.Etiqueta.Nome
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<p class="font-italic" style="margin-top:3em">Model.Receita.Descricao</p>

<hr />

<h3>Processo</h3>

<br />

<button type="button" class="btn btn-primary" style="background-color:#4CAF50; border-color:#4CAF50;">
    Processo Anterior
</button>

<button type="button" class="btn btn-primary" style="background-color:#4CAF50; border-color:#4CAF50;">
    Processo Seguinte
</button>

<button type="button" class="btn btn-primary" style="background-color:#4CAF50; border-color:#4CAF50;">
    Cancelar
</button>


<div class="container">
    <div class="row">
        <div class="col">
            <h4 style="margin-top:2em;">Ingredientes</h4>
            <table class="table">
                <thead class="thead-light">
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">Quantidade</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <text>utilizacaoIngrediente.Nome</text>
                        </td>
                        <td>Quantidade</td>
                    </tr>
                    <tr>
                        <td>
                            <text>utilizacaoIngrediente.Nome</text>
                        </td>
                        <td>Quantidade</td>
                    </tr>
                    <tr>
                        <td>
                            <text>utilizacaoIngrediente.Nome</text>
                        </td>
                        <td>Quantidade</td>
                    </tr>
                    <tr>
                        <td>
                            <text>utilizacaoIngrediente.Nome</text>
                        </td>
                        <td>Quantidade</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col">
            <h4 style="margin-top:2em;">Técnicas</h4>

            <ul class="CustomBullet" style="text-align:left;list-style: none">
                <li>
                    tecnica.Nome
                </li>
            </ul>
        </div>
        <div class="col">
            <h4 style="margin-top:2em;">Utensílios</h4>

            <ul class="CustomBullet" style="text-align:left;list-style: none">
                <li>
                    utensilio.Nome
                </li>
                <li>
                    utensilio.Nome
                </li>
                <li>
                    utensilio.Nome
                </li>
                <li>
                    utensilio.Nome
                </li>
                <li>
                    utensilio.Nome
                </li>
            </ul>
        </div>
    </div>
</div>

<hr />

<h4 style="margin-top:2em;">Passos</h4>

<ul class="CustomBullet" style="text-align:left;list-style: none;margin-bottom:2em;">
    <li>
        <text>Passo1.</text>
        <a onclick="startTimeOut(6000, 'Passo 1', 0)">
            <i id="stopwatch0" class="fas fa-stopwatch"></i>
        </a>
        <span id="TimeLeft0" style="display:none;"></span>
    </li>
    <li>
        <text>Passo2.</text>
        <a onclick="startTimeOut(7000, 'Passo 2', 1)">
            <i id="stopwatch1" class="fas fa-stopwatch"></i>
        </a>
        <span id="TimeLeft1" style="display:none;"></span>
    </li>
    <li>
        <text>Passo3.</text>
        <a onclick="startTimeOut(8000, 'Passo 3', 2)">
            <i id="stopwatch2" class="fas fa-stopwatch"></i>
        </a>
        <span id="TimeLeft2" style="display:none;"></span>
    </li>
</ul>

<script>
    var myVar = [];
    var x = [];

    function startTimeOut(time, str, id) {
        var countDownDate;
        var s = document.getElementById("stopwatch" + id);

        if (s.classList.contains('fa-stopwatch')) {
            s.classList.remove('fa-stopwatch');
            s.classList.add('fa-stop');
            s.style.color = "red";

            var now = new Date().getTime();
            var aux = new Date(time).getTime();

            countDownDate = now + aux;

            x[id] = setInterval(function () {

                var now = new Date().getTime();

                var distance = countDownDate - now;

                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("TimeLeft" + id).style.display = "block";
                document.getElementById("TimeLeft" + id).innerHTML = minutes + "m " + seconds + "s";

                // If the count down is finished, write some text
                if (distance < 0) {
                    clearInterval(x[id]);
                    document.getElementById("TimeLeft" + id).style.display = "none";
                    document.getElementById("TimeLeft" + id).innerHTML = "";
                }
            }, 1000);


            myVar[id] = setTimeout(function () {
                clearInterval(x[id]);
                document.getElementById("TimeLeft" + id).style.display = "none";
                s.classList.remove('fa-stop');
                s.classList.add('fa-stopwatch');
                s.style.color = "black";
                alert(str);
            }, time)
        }
        else {
            clearInterval(x[id]);
            clearTimeout(myVar[id]);
            document.getElementById("TimeLeft" + id).style.display = "none";
            s.classList.remove('fa-stop');
            s.classList.add('fa-stopwatch');
            s.style.color = "black";
        }
    }
</script>

<hr style="border-color:#4CAF50; border-width:4px;" />
