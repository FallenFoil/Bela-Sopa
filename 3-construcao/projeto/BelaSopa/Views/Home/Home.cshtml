@model (int Etiqueta, String Dificuldade, List<Etiqueta> Etiquetas, List<Receita> Receitas)
@{
    Layout = "_LayoutAutenticado";
    ViewData["Title"] = "Receitas";
}

<div class="container" style="border-bottom: 1px solid #717171;">
    <div class="row">
        <div class="col-sm">
            <form class="form-inline md-form form-sm active-cyan-2 mt-2">
                <input class="form-control form-control-sm mr-3 w-75" type="text" placeholder="Search" aria-label="Search">
                <i class="fas fa-search" aria-hidden="true"></i>
            </form>
        </div>
        <form asp-controller="Home" asp-action="GetFromEtiqueta" asp-route-etiqueta="Etiqueta">
            <div class="col-sm">
                <div class="form-group">
                    <select asp-for="Etiqueta" asp-items="@(new SelectList(Model.Etiquetas,"EtiquetaId", "Nome"))" class="form-control" id="etiquetasSel">
                        <option value=0>Qualquer etiqueta</option>
                    </select>
                </div>
            </div>
            <input type="submit" />
        </form>
            <div class="col-sm">
                <div class="form-group">
                    <select asp-for=@Model.Dificuldade class="form-control" id="sel1">
                        <option value="All">Qualquer dificuldade</option>
                        <option value="Facil">Dificuldade fácil</option>
                        <option value="Medio">Dificuldade média</option>
                        <option value="Dificil">Dificuldade difícil</option>
                    </select>
                </div>
            </div>
    </div>
</div>

<div class="container" style="margin-top:2%;">
    <h1>@Model.Etiqueta</h1>
    @for (var i = 0; i < Model.Receitas.Count;) {
        <div class="row ReceitasLinha">
            @{ var j = 0;}

            @for (; j < 3 && i < Model.Receitas.Count; j++, i++) {
                @for (; i < Model.Receitas.Count &&
                   (Model.Etiqueta > 0 && Model.Receitas[i].HasEtiqueta(Model.Etiqueta)); i++) { }

                if (i < Model.Receitas.Count) {
                    <div class="col-sm Receita">
                        <a href="#">
                            <img class="ReceitaImg" src="data:image/x-icon;base64,@Model.Receitas[i].GetImagemBase64()" alt="" />
                            <p>@Model.Receitas[i].Nome</p>
                        </a>
                        @switch (Model.Receitas[i].Dificuldade) {
                            case Dificuldade.Facil:
                                <i class="fas fa-signal" style="color:green;"></i>
                                break;

                            case Dificuldade.Media:
                                <i class="fas fa-signal" style="color:orange;"></i>
                                break;

                            case Dificuldade.Dificil:
                                <i class="fas fa-signal" style="color:red;"></i>
                                break;
                        }
                        <span style="margin-left:5%;">@Model.Receitas[i].MinutosPreparacao min <i class="fas fa-clock"></i></span>
                        <span style="margin-left:5%;">@Model.Receitas[i].NumeroDoses doses</span>
                    </div>
                }
            }
            @for (; j < 3; j++) {
                <div class="col-sm Receita">
                </div>
            }
        </div>
    }
</div>
