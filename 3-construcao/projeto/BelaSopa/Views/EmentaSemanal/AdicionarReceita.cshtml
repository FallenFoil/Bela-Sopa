@model (List<Etiqueta> Etiquetas, List<Receita> Receitas, int Data)
@{
    Layout = "_LayoutAutenticado";
    ViewData["Title"] = "Receitas";
}

<form asp-controller="EmentaSemanal" asp-action="VerReceitas" asp-route-data=@Model.Data method="get" class="form-inline md-form form-sm active-cyan-2 mt-2">
    <div class="container" style="border-bottom: 1px soli   d #717171;">
        <div class="row">
            <div class="col-sm">
                <i class="fas fa-search" aria-hidden="true"></i>
                <input  style="max-width: 100%" type="text" name="nome" value="@ViewData["nome"]" onchange="this.form.submit()"
                       placeholder="Nome" aria-placeholder="Nome" class="form-control form-control-sm mr-3 w-75">
            </div>
            <div class="col-sm" style="margin-bottom:1%">
                <div class="form-group">
                    <select name="etiqueta" class="form-control" onchange="this.form.submit()">
                        <option value="">Qualquer etiqueta</option>
                        @foreach (var etiqueta in Model.Etiquetas)
                        {
                            if (etiqueta.EtiquetaId == ViewData["etiqueta"] as int?)
                            {
                        <option selected value="@etiqueta.EtiquetaId">@etiqueta.Nome</option>
                            }
                            else
                            {
                        <option value="@etiqueta.EtiquetaId">@etiqueta.Nome</option>
                            }
                        }
                    </select>
                </div>
            </div>
            <div class="col-sm">
                <div class="form-group">
                    <select name="dificuldade" class="form-control" onchange="this.form.submit()">
                        @switch (ViewData["dificuldade"] as Dificuldade?)
                        {
                            case null:
                        <option selected value="">Qualquer dificuldade</option>
                        <option value="@Dificuldade.Facil">Dificuldade fácil</option>
                        <option value="@Dificuldade.Media">Dificuldade média</option>
                        <option value="@Dificuldade.Dificil">Dificuldade difícil</option>
                                break;

                            case Dificuldade.Facil:
                        <option value="">Qualquer dificuldade</option>
                        <option selected value="@Dificuldade.Facil">Dificuldade fácil</option>
                        <option value="@Dificuldade.Media">Dificuldade média</option>
                        <option value="@Dificuldade.Dificil">Dificuldade difícil</option>
                                break;

                            case Dificuldade.Media:
                        <option value="">Qualquer dificuldade</option>
                        <option value="@Dificuldade.Facil">Dificuldade fácil</option>
                        <option selected value="@Dificuldade.Media">Dificuldade média</option>
                        <option value="@Dificuldade.Dificil">Dificuldade difícil</option>
                                break;

                            case Dificuldade.Dificil:
                        <option value="">Qualquer dificuldade</option>
                        <option value="@Dificuldade.Facil">Dificuldade fácil</option>
                        <option value="@Dificuldade.Media">Dificuldade média</option>
                        <option selected value="@Dificuldade.Dificil">Dificuldade difícil</option>
                                break;
                        }
                    </select>
                </div>
            </div>
        </div>
    </div>
</form>
<style>
    .opacity:hover{
        filter: opacity(90%);
    }
    .greenOpacity{
        display: block;
        z-index: 10;
        background-color: green;
        opacity: 10;
    }
</style>
<div class="container" style="margin-top:2%;">
    @for (var i = 0; i < Model.Receitas.Count;)
    {
    <div class="row ReceitasLinha">
        @{ var j = 0;}
        @for (; j < 3 && i < Model.Receitas.Count; j++, i++)
            {
        <div class="col-sm Receita">
            <a asp-action="AdicionarReceita" asp-route-idDataRefeicao="@Model.Data"
               asp-route-idReceita="@Model.Receitas[i].ReceitaId">
                <img class="ReceitaImg opacity" src="data:image/*;base64,@Util.BytesToBase64(Model.Receitas[i].Imagem)" alt="" />
                <p>@Model.Receitas[i].Nome</p>
            </a>
            @switch (Model.Receitas[i].Dificuldade)
                    {
                        case Dificuldade.Facil:
            <span><i class="fas fa-signal" style="color: green; margin-right: 0.5em;"></i>Fácil</span>
                            break;

                        case Dificuldade.Media:
            <span><i class="fas fa-signal" style="color: orange; margin-right: 0.5em;"></i>Média</span>
                            break;

                        case Dificuldade.Dificil:
            <span><i class="fas fa-signal" style="color: red; margin-right: 0.5em;"></i>Difícil</span>
                            break;
                    }
            &nbsp;|&nbsp;
            <span><i class="fas fa-clock" style="margin-right: 0.5em;"></i>@Model.Receitas[i].MinutosPreparacao min</span>
            &nbsp;|&nbsp;
            <span>@Model.Receitas[i].NumeroDoses doses</span>
        </div>
            }
        @for (; j < 3; j++)
            {
        <div class="col-sm Receita">
        </div>
            }
    </div>
    }
</div>
